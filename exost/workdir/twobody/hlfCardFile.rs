eff = cexpr('0.5*eff_c*(1+ erf( (peak-eff_a) / (eff_b*sqrt(2)) ))',peak,eff_a,eff_b,eff_c);
eff_dummy1 = cexpr('0.5*eff_c*(1+TMath::Erf( (peak-eff_a) / (eff_b*sqrt(2)) ))',peak,eff_a,eff_b,eff_c);
bkgpdf = CEXPR('(a*pow((1-mass/8000),b)) / pow(mass/8000,c+d*log(mass/8000))',a,mass,b,c,d);
bkgpdf_dummy = CEXPR('(pow(a*(1-mass/8000),b)) / pow(mass/8000,c+d*log(mass/8000))',a,mass,b,c,d);
nsig_nuis = cexpr('pow(nsig_kappa,beta_nsig)', nsig_kappa, beta_nsig);
nsig = prod(nsig_scale, ratio, nz, eff, nsig_nuis);
syst_nsig = Gaussian(beta_nsig, glob_nsig, 1);
nbkg_nuis = cexpr('pow(nbkg_kappa_b+nbkg_kappa_m*mass-nbkg_kappa_msquared*mass*mass+nbkg_kappa_mcubed*mass*mass*mass,beta_nbkg)', nbkg_kappa_b, nbkg_kappa_m, mass, nbkg_kappa_msquared, nbkg_kappa_mcubed, beta_nbkg);
nbkg_nuis_dummy_dimuon = cexpr('pow(nbkg_kappa,beta_nbkg)', nbkg_kappa, beta_nbkg);
nbkg = prod(nbkg_est, nbkg_nuis);
syst_nbkg = Gaussian(beta_nbkg, glob_nbkg, 1);
mass_nuis = cexpr('pow(mass_kappa,beta_mass)', mass_kappa, beta_mass);
mass_scaled = prod(mass, mass_nuis);
width = sum(width_p0, prod(width_p1,peak));
sigma_rel = cexpr('0.01*sqrt(res_a*res_a/peak/peak + res_b*res_b/peak + res_c*res_c)', res_a, peak, res_b, res_c);
sigma_rel_dummy_ebee = cexpr('0.01*sqrt(res_a*res_a/peak/peak + res_b*res_b/peak + res_c)', res_a, peak, res_b, res_c);
sigma_rel_dummy_dimu = cexpr('0.01*sqrt(res_a*res_a/peak/peak + res_b*res_b/peak + res_c)', res_a, peak, res_b, res_c);
sigma = prod(sigma_rel, peak);
sigpdf = Voigtian(mass_scaled, peak, width, sigma);
syst_mass = Gaussian(beta_mass, glob_mass, 1);
model_core = SUM(nsig*sigpdf, nbkg*bkgpdf);
model = PROD(model_core, syst_nsig, syst_nbkg, syst_mass);
prior = Uniform(ratio);
